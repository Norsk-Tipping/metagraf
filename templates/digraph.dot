digraph {
  rankdir=tplr
  node [color=grey25,
        fillcolor=wheat,
        shape=box,
        style="rounded,filled"];
{{ range $mg := . -}}
{{ range $mg.Spec.Resources -}}
"{{.Name}}{{if .Version}}-v{{.Version}}{{end}}" [{{ if eq .Type "datasource" }}shape=cylinder,fillcolor=lightskyblue{{end}}]
"{{ $mg.Metadata.Name}}-v{{$mg.Metadata.Version}}" -> "{{ .Name }}{{if .Version}}-v{{.Version}}{{end}}"
{{ end -}}
{{ end -}}
}